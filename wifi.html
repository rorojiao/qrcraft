<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>WiFi QR Code Generator - QRCraft</title>
<meta name="description" content="Generate WiFi QR codes. Scan to connect to WiFi automatically.">
<meta property="og:title" content="WiFi QR Code Generator - QRCraft">
<link rel="canonical" href="https://rorojiao.github.io/qrcraft/wifi.html">
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <a href="index.html" class="logo">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="4" height="4" rx="0.5"/><line x1="21" y1="14" x2="21" y2="21"/><line x1="14" y1="21" x2="21" y2="21"/></svg>
    <span data-i18n="brand">QRCraft</span>
  </a>
  <nav>
    <a href="index.html" data-i18n="home">Home</a>
    <a href="generate.html" data-i18n="generate">Generate</a>
    <a href="decode.html" data-i18n="decode">Decode</a>
    <a href="wifi.html" class="active" data-i18n="wifi">WiFi QR</a>
    <div class="lang-switch">
      <button data-lang="en">EN</button>
      <button data-lang="zh">中</button>
      <button data-lang="ja">日</button>
    </div>
  </nav>
</header>
<main>
  <h1 data-i18n="wifiPageTitle">WiFi QR Code</h1>
  <p class="subtitle" data-i18n="wifiHint">Scan this QR code to connect to WiFi automatically</p>
  <div class="card">
    <div class="form-group">
      <label data-i18n="ssidLabel">Network Name (SSID)</label>
      <input type="text" id="wifi-ssid" placeholder="MyWiFi">
    </div>
    <div class="form-group">
      <label data-i18n="passLabel">Password</label>
      <input type="text" id="wifi-pass" placeholder="">
    </div>
    <div class="form-group">
      <label data-i18n="encLabel">Encryption</label>
      <select id="wifi-enc">
        <option value="WPA">WPA/WPA2</option>
        <option value="WEP">WEP</option>
        <option value="nopass" data-i18n="encNone">None</option>
      </select>
    </div>
    <div class="btn-row">
      <button class="btn btn-primary" onclick="generateWiFiQR()" data-i18n="btnGenWifi">Generate WiFi QR</button>
      <button class="btn btn-secondary" id="btn-download" onclick="downloadQR()" style="display:none" data-i18n="btnDownload">Download PNG</button>
    </div>
  </div>
  <div id="qr-output"></div>
</main>
<footer>
  <div class="tip-box">
    <span data-i18n="footerTip">Tip: </span>
    <a href="https://etherscan.io/address/0xEeD903787Cb86bcCc17777E5C7d10A4c2De43823" target="_blank" data-i18n="tipAddr">Support QRCraft</a>
    <br><code>0xEeD903787Cb86bcCc17777E5C7d10A4c2De43823</code>
  </div>
  <p style="margin-top:12px" data-i18n="footerCopy">© 2026 QRCraft.</p>
</footer>
<script src="qrlib.js"></script>
<script src="i18n.js"></script>
<script>
let lastCanvas=null;
function escWifi(s){return s.replace(/[\\;,:""]/g,c=>'\\'+c)}
function generateWiFiQR(){
  const ssid=document.getElementById('wifi-ssid').value.trim();
  if(!ssid)return;
  const pass=document.getElementById('wifi-pass').value;
  const enc=document.getElementById('wifi-enc').value;
  const wifiStr=`WIFI:T:${enc};S:${escWifi(ssid)};P:${escWifi(pass)};;`;
  const qr=qrcode(0,'M');
  qr.addData(wifiStr);qr.make();
  const mods=qr.getModuleCount();
  const cellSize=Math.max(4,Math.floor(400/mods));
  const size=mods*cellSize;
  const canvas=document.createElement('canvas');
  canvas.width=size;canvas.height=size;
  const ctx=canvas.getContext('2d');
  ctx.fillStyle='#ffffff';ctx.fillRect(0,0,size,size);
  ctx.fillStyle='#000000';
  for(let r=0;r<mods;r++){for(let c=0;c<mods;c++){if(qr.isDark(r,c))ctx.fillRect(c*cellSize,r*cellSize,cellSize,cellSize)}}
  const out=document.getElementById('qr-output');
  out.innerHTML='';out.appendChild(canvas);
  lastCanvas=canvas;
  document.getElementById('btn-download').style.display='inline-flex';
}
function downloadQR(){
  if(!lastCanvas)return;
  const a=document.createElement('a');
  a.download='qrcraft-wifi.png';a.href=lastCanvas.toDataURL('image/png');a.click();
}
</script>
</body>
</html>
